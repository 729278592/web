<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>手机号修改</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; user-scalable=no;">
    <link rel="stylesheet" href="../../assets/global/plugins/font/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../../assets/mobile/css/weui.css"/>
    <link rel="stylesheet" href="../../assets/mobile/css/example.css"/>
    <link rel="stylesheet" href="../../assets/mobile/css/global.css"/>
</head>
<body>
    <div class="content errDailog">
        <div class="page">
            <div class="hd">
                <a>
                    <i class="fa fa-angle-left"></i>
                </a>
                得力加油
                <div class="right nav_block">
                <a href="shoppingCat.html" class="shop_cat"></a>
                <a class="dot_block"></a>
                <ul class="nav_link">
                    <li>
                        <a href="index.html">
                            主页
                        </a>
                    </li>
                    <li>
                        <a href="shopMall.html">
                            精选商城
                        </a>
                    </li>
                    <li>
                        <a href="gasStationInfor.html">
                            马上加油
                        </a>
                    </li>
                    <li>
                        <a href="personCenter.html">
                            会员中心
                        </a>
                    </li>
                </ul>
            </div>
            </div>
            <div class="bd absolute pd48">
                <form action="#" id="form" onsubmit="return false">
                    <div class="weui_cells weui_cells_form mt0">
                        <div class="weui_cell">
                            <div class="weui_cell_hd">
                                <label class="weui_label">
                                    <span class="span_icon spa_phone"></span>

                                </label>
                            </div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input class="weui_input" type="text" placeholder="13678478463" name="mobile" id="mobile"/>
                            </div>
                        </div>
                        <div class="weui_cell">
                            <div class="weui_cell_hd">
                                <label class="weui_label">
                                    <span class="span_icon spa_code"></span>
                                </label>
                            </div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input class="weui_input codeInput" type="text" placeholder="请输入验证码" id="code"/>
                                <button type="button" class="getCode disabled" disabled="disabled"  id="getCode">获取验证码</button>
                            </div>
                        </div>
                    </div>
                    <div class="weui_btn_area fixed">
                        <input type="submit" class="weui_btn b0 weui_btn_primary" id="saveBtn" value="保存">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="../../assets/global/plugins/jquery/jquery-1.11.3.min.js"></script>
    <script src="../../assets/mobile/js/global.js"></script>
    <script src="../../assets/mobile/js/removeTip.js"></script>
    <script>
        $(function(){
            /*发送验证码*/
            $("#getCode").on("click",function(){
                var btn = $(this);
                var count = 60;
                var resend = setInterval(function(){
                    count--;
                    if (count > 0){
                        btn.addClass("disabled");
                        btn.text(count+"秒后可重新获取");
                    }else {
                        clearInterval(resend);
                        btn.removeClass("disabled");
                        btn.text("获取验证码").removeAttr('disabled style');
                    }
                }, 1000);
                showErrMsg('验证码发送成功');
                btn.attr('disabled',true);
            });


            /*保存错误提示*/
            $("#saveBtn").on("touchend",function(){
                var reg = /^0?(13[0-9]|15[012356789]|18[0236789]|14[57])[0-9]{8}$/;
                if($("#mobile").val() == '') {
                    showErrMsg('手机号码不能为空');
                    return false;
                }
                else if($("#mobile").get(0)&&!reg.test($("#mobile").val())){
                    showErrMsg('手机号码格式不正确');
                    return false;
                }
                else{
                    window.location.href = "personCenter.html";
                }
                return true;
            })
        })
    </script>
</body>
</html>