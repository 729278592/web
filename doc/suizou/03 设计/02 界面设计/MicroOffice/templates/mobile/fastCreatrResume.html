<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; user-scalable=no;">
    <link rel="stylesheet" href="../../assets/global/plugins/font/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../../assets/mobile/css/global.css"/>
    <link rel="stylesheet" href="../../assets/mobile/css/weui.css"/>
    <link rel="stylesheet" href="../../assets/mobile/css/example.css"/>
</head>
<body>
    <div class="container js_container absolute errDailog">
        <div class="page">
            <div class="bd">
                <img src="../../assets/mobile/images/resume2.jpg" alt="" class="resume"/>
                <form action="#" id="form" onsubmit="return false">
                    <div class="weui_cells weui_cells_form mt0">
                        <div class="weui_cell">
                            <div class="weui_cell_hd"><label class="weui_label">姓名</label></div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input class="weui_input" type="text" placeholder="张三" id="personName"/>
                            </div>
                        </div>
                        <div class="weui_cell">
                            <div class="weui_cell_hd"><label for="" class="weui_label">生日</label></div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input id="start" class="Wdate" type="text" style="border: none;height: 18px;" placeholder="2015-02-05" onfocus="WdatePicker({})" readonly="">
                                <i class="fa fa-calendar"></i>
                            </div>
                        </div>
                    </div>
                    <div class="weui_btn_area">
                        <input type="submit" class="weui_btn weui_btn_primary js_cell" data-id="fillResumeWorkExperience" id="saveBtn" value="下一步">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/html" id="tpl_fillResumeWorkExperience">
        <div class="page">
            <div class="head">
                <i class="fa fa-angle-left"></i>
                新建简历
            </div>
            <div class="bd">
                <img src="../../assets/mobile/images/resume3.jpg" alt="" class="resume"/>
                <form action="#" id="form" onsubmit="return false">
                    <div class="weui_cells weui_cells_form mt0">
                        <div class="weui_cell">
                            <div class="weui_cell_hd"><label for="" class="weui_label"><img src="../../assets/mobile/images/startTimeIcon.png" alt=""/>开始日期</label></div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input id="start" class="Wdate" type="text" style="border: none;height: 18px;" placeholder="2015-02-05" onfocus="WdatePicker({minDate:'%y-%M-{%d}',maxDate:'#F{$dp.$D(\'end\')}',readOnly:true})" readonly="">
                                <i class="fa fa-calendar"></i>
                            </div>
                        </div>
                        <div class="weui_cell">
                            <div class="weui_cell_hd"><label for="" class="weui_label"><img src="../../assets/mobile/images/endTimeIcon.png" alt=""/>结束日期</label></div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input id="end" class="Wdate" type="text" style="border: none;height: 18px;"placeholder="2015-02-06" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'start\')||\'%y-%M-{%d+1}\'}',readOnly:true})" readonly="">　
                                <i class="fa fa-calendar"></i>
                            </div>
                        </div>
                        <!--<div class="weui_cell">-->
                        <!--<div class="weui_cell_hd"><label for="" class="weui_label">时间</label></div>-->
                        <!--<div class="weui_cell_bd weui_cell_primary">-->
                        <!--<input class="weui_input" type="datetime-local" value="" placeholder=""/>-->
                        <!--</div>-->
                        <!--</div>-->
                        <div class="weui_cell">
                            <div class="weui_cell_hd"><label class="weui_label"><img src="../../assets/mobile/images/companyIcon.png" alt=""/>公司</label></div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input class="weui_input" type="text" placeholder="重庆易优弧有限公司"/>
                            </div>
                        </div>
                        <div class="weui_cell">
                            <div class="weui_cell_hd"><label class="weui_label"><img src="../../assets/mobile/images/jobIcon.png" alt=""/>行业</label></div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input class="weui_input" type="text" placeholder="科技公司"/>
                            </div>
                        </div>
                        <div class="weui_cell">
                            <div class="weui_cell_hd"><label class="weui_label"><img src="../../assets/mobile/images/positionIcon.png" alt=""/>职位</label></div>
                            <div class="weui_cell_bd weui_cell_primary">
                                <input class="weui_input" type="text" placeholder="设计"/>
                            </div>
                        </div>
                    </div>
                    <div class="weui_btn_area">
                        <input type="submit" class="weui_btn weui_btn_primary" id="saveBtn" data-id="" value="下一步">
                    </div>
                </form>
            </div>
        </div>
    </script>
    <script></script>
    <script></script>
    <script></script>
    <script></script>
    <script src="../../assets/global/plugins/jquery/jquery-1.11.3.min.js"></script>
    <!--<script src="../../assets/mobile/js/example.js"></script>-->
    <script src="../../assets/mobile/js/global.js"></script>
    <script src="../../assets/mobile/js/errMsg.js"></script>
    <script src="../../assets/global/plugins/My97DatePicker/WdatePicker.js"></script>
    <script>
        var stack = [];
        var $container = $('.js_container');
        function getData(obj){
            var id = obj.data('id');
            go(id);
        }

        // location.hash = '#hash1' 和点击后退都会触发`hashchange`，这个demo页面只关心后退
        $(window).on('hashchange', function (e) {
            if (/#.+/gi.test(e.newURL)) {
                return;
            }
            var $top = stack.pop();
            if (!$top) {
                return;
            }
            $top.addClass('slideOut').on('animationend', function () {
                $top.remove();
            }).on('webkitAnimationEnd', function () {
                $top.remove();
            });
        });
        function go(id){
            var $tpl = $($('#tpl_' + id).html()).addClass('slideIn').addClass(id);
            $container.append($tpl);
            stack.push($tpl);
            // why not use `history.pushState`, https://github.com/weui/weui/issues/26
            //history.pushState({id: id}, '', '#' + id);
            location.hash = '#' + id;
            $($tpl).on('webkitAnimationEnd', function (){
                $(this).removeClass('slideIn');
            }).on('animationend', function (){
                $(this).removeClass('slideIn');
            });
        }

//        if (/#.*/gi.test(location.href)) {
//            go(location.hash.slice(1));
//        }


        $("#saveBtn").click(function(){
            if($(this).closest(".js_container").find("#personName").val() == '') {
                showMsg('姓名不能为空');
                return false;
            }
            else  if($(this).closest(".js_container").find("#start").val() == '') {
                showMsg('时间不能为空');
                return false;
            }else{
                getData($(this))
            }
            return true;
        })
    </script>
</body>
</html>
